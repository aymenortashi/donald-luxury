---
import "../styles/global.css";
import Nav from "../components/nav.astro";
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Donald Luxury</title>
  </head>
  <body class="bg-white text-gray-900 font-sans antialiased">

    <!-- Navigation -->
    <Nav/>

    <!-- Preloader -->
  <!-- Preloader -->
<div id="preloader" class="fixed inset-0 flex flex-col justify-center items-center z-[9999] bg-white">
  <h1 id="preloader-h1" class="text-4xl md:text-6xl font-serif text-gray-900 tracking-wide animate-pulse">
    Donald
  </h1>
  <div id="preloader-words" class="flex space-x-4 text-lg md:text-2xl text-gray-500 mt-2">
    <span class="word">Élégance</span>
    <span class="word">Discipline</span>
    <span class="word">Luxe</span>
  </div>
</div>

<!-- Main hero section -->
<section id="index-content" class="w-screen h-screen relative overflow-hidden opacity-0">
  <div class="flex flex-col md:flex-row h-full">
    <div class="image-container relative md:w-1/3 w-full h-1/3 md:h-full overflow-hidden opacity-0">
      <img src="/images/elegance.png" class="w-full h-full object-cover brightness-50 transition duration-700" />
      <span class="image-word absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-lg md:text-2xl opacity-0">Élégance</span>
    </div>
    <div class="image-container relative md:w-1/3 w-full h-1/3 md:h-full overflow-hidden opacity-0">
      <video autoplay muted loop playsinline preload="auto" class="w-full h-full object-cover brightness-50 transition duration-700">
        <source src="/videos/discipline.mp4" type="video/mp4" />
      </video>
      <span class="image-word absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-lg md:text-2xl opacity-0">Discipline</span>
    </div>
    <div class="image-container relative md:w-1/3 w-full h-1/3 md:h-full overflow-hidden opacity-0">
      <img src="/images/luxury.png" class="w-full h-full object-cover brightness-50 transition duration-700" />
      <span class="image-word absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-lg md:text-2xl opacity-0">Luxe</span>
    </div>
  </div>
</section>

<script type="module">
window.addEventListener('load', () => {
  const preloader = document.getElementById('preloader');
  const h1 = document.getElementById('preloader-h1');
  const images = document.querySelectorAll('.image-container');
  const mainSection = document.getElementById('index-content');

  // STEP 1: Fade out preloader completely
  setTimeout(() => {
    preloader.style.transition = 'opacity 1s ease';
    preloader.style.opacity = '0';
    
    setTimeout(() => {
      preloader.remove();

      // STEP 2: Move H1 from preloader to hero section
      const heroX = window.innerWidth / 2;
      const heroY = window.innerHeight / 2;
      const h1Rect = h1.getBoundingClientRect();
      h1.style.position = 'fixed';
      h1.style.left = `${h1Rect.left}px`;
      h1.style.top = `${h1Rect.top}px`;
      h1.style.transition = 'all 1.2s ease, color 1.2s ease';
      h1.style.zIndex = 50;
      h1.getBoundingClientRect();

      h1.style.left = `${heroX}px`;
      h1.style.top = `${heroY}px`;
      h1.style.transform = 'translate(-50%, -50%)';
      h1.style.color = 'white';

      setTimeout(() => {
        h1.style.position = 'absolute';
        h1.style.left = '50%';
        h1.style.top = '50%';
        h1.style.transform = 'translate(-50%, -50%)';
        h1.style.zIndex = 20;
        mainSection.prepend(h1);
      }, 1200);

      // STEP 3: Fade in index content including images & words
      mainSection.style.transition = 'opacity 1.5s ease';
      mainSection.style.opacity = '1';
      images.forEach(imgContainer => {
        imgContainer.style.transition = 'opacity 1.5s ease';
        imgContainer.style.opacity = '1';
        const word = imgContainer.querySelector('.image-word');
        if(word) {
          word.style.transition = 'opacity 1s ease 0.5s';
          word.style.opacity = '1';
        }
        
      });
      const video = document.querySelector('video');
video?.play().catch(() => {
  console.log('Autoplay blocked — waiting for user interaction');
  const clickHandler = () => {
    video.play();
    window.removeEventListener('click', clickHandler);
  };
  window.addEventListener('click', clickHandler);
});

    }, 1000); // wait for preloader fade-out
  }, 1500); // wait for preloader text fade-in
  
});
</script>


  </body>
</html>
