---
import Layout from '../layouts/Layout.astro';
---

<Layout>
<section class="w-screen h-screen relative overflow-hidden">
  <!-- H1 stays centered -->
  <h1 class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
             text-6xl md:text-8xl font-serif text-gray-900 z-20">
    Donald
  </h1>

  <!-- Images -->
  <div class="flex flex-col md:flex-row h-full">
    <div class="image-container relative md:w-1/3 w-full h-1/3 md:h-full overflow-hidden">
      <img src="/images/elegance.png" class="w-full h-full object-cover brightness-50 transition duration-700" />
    </div>
    <div class="image-container relative md:w-1/3 w-full h-1/3 md:h-full overflow-hidden">
      <img src="/images/discipline.png" class="w-full h-full object-cover brightness-50 transition duration-700" />
    </div>
    <div class="image-container relative md:w-1/3 w-full h-1/3 md:h-full overflow-hidden">
      <img src="/images/luxury.png" class="w-full h-full object-cover brightness-50 transition duration-700" />
    </div>
  </div>
</section>

<script type="module">
window.addEventListener('load', () => {
  const preloader = document.getElementById('preloader');
  const words = document.querySelectorAll('#preloader-words .word');
  const imageContainers = document.querySelectorAll('.image-container');

  setTimeout(() => {
    if (!preloader || !words.length) return;

    // Make preloader background transparent so words can move
    preloader.style.background = 'transparent';

    words.forEach((word, i) => {
      const imgRect = imageContainers[i].getBoundingClientRect();

      // Start from current position in preloader
      const startRect = word.getBoundingClientRect();
      word.style.position = 'fixed';
      word.style.left = `${startRect.left}px`;
      word.style.top = `${startRect.top}px`;
      word.style.transition = 'all 1s ease';
      word.style.zIndex = 50;

      // Force browser to register the starting position
      word.getBoundingClientRect();

      // Animate to bottom center of image
      word.style.left = `${imgRect.left + imgRect.width / 2}px`;
      word.style.top = `${imgRect.top + imgRect.height - 30}px`; // 30px from bottom
      word.style.transform = 'translateX(-50%)';
    });

    // Fade out preloader H1
    document.getElementById('preloader-h1')?.classList.add('opacity-0');

    // Remove preloader after animation
    setTimeout(() => preloader.remove(), 1500);
  }, 2500); 
});
</script>
